(()=>{"use strict";var t=function(){return{length:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,timesHit:0,checkIfSunk:function(){return this.timesHit===this.length},hit:function(){this.timesHit++}}},e=function(){for(var e=[],n="ABCDEFGHIJ".split(""),r=function(){var t={};n.forEach((function(e){t[e]=[]})),e[a]=t},a=0;a<10;a++)r();var o=function(t,e){return t>=0&&t<10&&e>=0&&e<10},l=function(t,r,a,l){for(var i=n.indexOf(r),c=0;c<a;c++){var d,u,s,f,h,m,v,b,p=t+("vertical"===l?c:0),g=i+("horizontal"===l?c:0);if(!o(p,g)||e[p][n[g]].length)return!1;if(p>0&&null!==(d=e[p-1][n[g]])&&void 0!==d&&d.length||p<9&&null!==(u=e[p+1][n[g]])&&void 0!==u&&u.length||g>0&&null!==(s=e[p][n[g-1]])&&void 0!==s&&s.length||g<9&&null!==(f=e[p][n[g+1]])&&void 0!==f&&f.length||p>0&&g>0&&null!==(h=e[p-1][n[g-1]])&&void 0!==h&&h.length||p>0&&g<9&&null!==(m=e[p-1][n[g+1]])&&void 0!==m&&m.length||p<9&&g>0&&null!==(v=e[p+1][n[g-1]])&&void 0!==v&&v.length||p<9&&g<9&&null!==(b=e[p+1][n[g+1]])&&void 0!==b&&b.length)return!1}return!0},i=function(t,r,a){for(var o=n.indexOf(r),l=0;l<a.length;l++)e[t][n[o+l]]=a},c=function(t,r,a){for(var o=n.indexOf(r),l=0;l<a.length;l++)e[t+l][n[o]]=a};return{ObjBoard:e,setShipOnBoard:function(e,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"horizontal";if(e>=0&&e<10&&n.includes(r)){var l=t(a);return"horizontal"===o?(i(e,r,l),"Ship set on board!"):(c(e,r,l),"Ship set on board!")}console.error("Wrong coordinates. Ship is not placed!")},setShipsRandomly:function(e){e.forEach((function(e){!function(e){for(var r=!1;!r;){var a=Math.floor(10*Math.random()),o=n[Math.floor(10*Math.random())],d=Math.random()>.5?"vertical":"horizontal";"vertical"===d&&l(a,o,e,"vertical")?(c(a,o,t(e)),r=!0):"horizontal"===d&&l(a,o,e,"horizontal")&&(i(a,o,t(e)),r=!0)}}(e)}))},receiveAttack:function(t,n){return e[t][n].length?(e[t][n].hit(),e[t][n].checkIfSunk()?"The ship has sunk!":"The ship has been hit!"):(this.missedShots.push([t,n]),"Miss!")},checkIfGameOver:function(){return e.flatMap((function(t){return Object.values(t)})).filter((function(t){return t.length})).every((function(t){return t.checkIfSunk()}))},missedShots:[],clearOutTheBoard:function(){!function(t){throw new TypeError('"ObjBoard" is read-only')}()}}};function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,d=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(t){d=!0,a=t}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var a=function(t){for(var e=document.createElement("tbody"),n=0;n<t.board.ObjBoard.length;n++){var r=document.createElement("tr");for(var a in r.setAttribute("data-row",n),r.classList.add("battlefield-row"),e.appendChild(r),t.board.ObjBoard[n]){var o=document.createElement("td");o.setAttribute("data-column",a),o.setAttribute("data-row",n),o.setAttribute("data-player",t.name),o.classList.add("battlefield-cell"),t.board.ObjBoard[n][a].length&&o.classList.add("battlefield-cell-occupied");var l=document.createElement("div");l.classList.add("battlefield-cell-content"),o.appendChild(l),r.appendChild(o)}}return e},o=function t(e,r){var a=Array.from(document.querySelectorAll("[data-player=Kamron]")),o=document.querySelector(".player1"),d=document.querySelector(".player2"),u=document.getElementById("myMessages");"none"===getComputedStyle(o).pointerEvents||setTimeout((function(){var s=function(t){var e,r=[0,1,2,3,4,5,6,7,8,9],a="ABCDEFGHIJ".split(""),o=function(t){return a.indexOf(t)},l=function(t){return a[t]};if(t.movesMade.length>0&&t.hits.length>0){var i=t.movesMade[t.movesMade.length-1],c=t.hits[t.hits.length-1],d=i[0]===c[0]&&i[1]===c[1];if(console.log("Last Move: ".concat(i,", Last hit: ").concat(c)),d){var u=function(t){var e=n(t,2),i=e[0],c=e[1],d=o(c);return[[i,l(d+1)],[i,l(d-1)],[i+1,c],[i-1,c]].filter((function(t){var e=n(t,2),l=e[0],i=e[1];return function(t,e){return t>=0&&t<r.length&&e>=0&&e<a.length}(l,o(i))}))}(i),s=u.filter((function(e){return!t.movesMade.includes(e)}));s.length>0&&(e=s[Math.floor(Math.random()*s.length)])}}if(!e)do{e=[r[Math.floor(Math.random()*r.length)],a[Math.floor(Math.random()*a.length)]]}while(t.movesMade.some((function(t){return t[0]===e[0]&&t[1]===e[1]})));return t.movesMade.push(e),e}(e);console.log("OpponentMove0: ".concat(s[0],", OpponentMove1: ").concat(s[1]));var f=a.find((function(t){return t.getAttribute("data-column")===s[1].toString()&&t.getAttribute("data-row")===s[0].toString()}));f.classList.contains("battlefield-cell-occupied")?(e.hits.push([s[0],s[1]]),i(u,r.board.receiveAttack(s[0],s[1])),f.classList.add("battlefield-cell-occupied-hit"),c(r)&&(o.classList.add("disabled"),d.classList.add("disabled"),i(u,"All ships destroyed! ".concat(r.name," lost!"))),t(e,r)):(i(u,r.board.receiveAttack(s[0],s[1])),f.classList.add("battlefield-cell-miss"),l(d,o))}),2e3)},l=function(t,e){t.classList.toggle("disabled"),e.classList.toggle("disabled")},i=function(t,e){t.innerHTML="";var n=document.createElement("p");n.textContent=e,t.appendChild(n)},c=function(t){return t.board.checkIfGameOver()},d=document.querySelector(".battlefield-table-1"),u=document.querySelector(".battlefield-table-2"),s={name:"Kamron",board:e()},f={name:"Computer",movesMade:[],hits:[],board:e()};document.querySelector("#randomize-btn"),s.board.setShipsRandomly([4,3,3,2,2,2,1,1,1,1]),d.appendChild(a(s)),f.board.setShipsRandomly([4,3,3,2,2,2,1,1,1,1]),u.appendChild(a(f)),function(t,e){var n=document.querySelectorAll("[data-player=Computer]"),r=document.querySelector(".player1"),a=document.querySelector(".player2");r.classList.add("disabled");var d=function n(d){var u=d.currentTarget,s=document.getElementById("opponentMessages"),f=u.getAttribute("data-row");!function(n,d,u,f){u?(i(s,t.board.receiveAttack(d,n)),f.classList.add("battlefield-cell-occupied-hit"),c(t)&&(r.classList.add("disabled"),a.classList.add("disabled"),i(s,"All ships destroyed! ".concat(t.name," lost!")))):(i(s,t.board.receiveAttack(d,n)),f.classList.add("battlefield-cell-miss"),l(r,a),o(t,e))}(u.getAttribute("data-column"),f,u.classList.length>1,u),u.removeEventListener("click",n)};n.forEach((function(t){return t.addEventListener("click",d)}))}(f,s)})();